<tool id="item_parser" name="Parse items in bowtie matching" version="2.0.0">
  <description></description>
  <requirements><requirement type='package'>bowtie-inspect</requirement></requirements>
  <parallelism method="basic"></parallelism>
<command interpreter="python">
    #if $switch.label_mechanism=="manual"
        itemparser.py $input $index $switch.manual_label $output
    #else
        itemparser.py $input $index ${input.name} $output
    #end if
</command>
  <inputs>
    <conditional name="switch">
       <param name="label_mechanism" type="select" label="How to label">
          <option value="manual" select="true">manual</option>
          <option value="automatic">automatic</option>
       </param>
    <when value="manual">
     <param name="manual_label" type="text" size="10" label="Library Label" help="Put the library label for easy subsequent data aggregation and DESeq analysis"/>
    </when>
   </conditional>

        <param name="index" type="select" label="Select the reference genome" help="if your genome of interest is not listed - contact Christophe Antoniewski at drosofff@gmail.com">
                <options from_data_table="ged_bowtie_indexes"></options>
        </param>
     <param name="input" type="data" format="tabular" label="Bowtie tabular output" help="Bowtie output from miRbase matching"/>
   </inputs>
   <outputs>
   <data format="tabular" name="output" label="Straigth Hit List"/>
   </outputs>
  <help>

**What it does**

Parses read counts from a Bowtie standard tabular output.
Here a bowtie match done against an index composed of a set of items is parsed and expressed as a hit list of the corresponding items
In this new version, the bowtie match may have been done either against both DNA strands or only against the "sense" strands (RNA type) of the reference index
Use the manual option to enter a library label, or use the automatic option to infer the library label from the input file name (very useful for batch workflows)

If you use the manual option, **do not put spaces in the labels you choose**, otherwise it will mislead the parser script

If you use automatic option to infer the library label from the input file name,
**it is mandatory that you do not put any space in this input file name**
otherwise, it will mislead the parser script



  </help>
</tool>

