<tool id="length_and_gc_content" name="gene length and gc content from gtf file" version="0.1.0">
    <description />
    <requirements>
        <requirement type="package" version="3.2.1">R</requirement>
        <requirement type="package" version="1.22.0">goseq</requirement>
    </requirements>
    <command interpreter="Rscript">
        get_length_and_gc_content.r --gtf "$gtf"
        #if $fastaSource.genomeSource == "indexed":
            --fasta "$fastaSource.fasta_pre_installed.fields.path"
        #else:
            --fasta "$fastaSource.fasta_history"
        #end if
        --output "$output"
    </command>
    <inputs>
        <param help="The GTF must match the FASTA file" label="GTF file for length and GC calculation" name="gtf" type="data" />
        <conditional name="fastaSource">
            <param help="choose history if you don't see the correct genome fasta" label="Select a reference fasta from your history or use a built-in fasta?" name="genomeSource" type="select">
                <option value="indexed">Use a built-in fasta</option>
                <option value="history">Use fasta from history</option>
            </param>
        <when value="indexed">
            <param help="Select the fasta file from a list of pre-installed genomes" label="Select a fasta sequence" name="fasta_pre_installed" type="select">
              <options from_data_table="all_fasta"/>
            </param>
        </when>
        <when value="history">
            <param format="fasta" label="Select a fasta file, to serve as index reference" name="fasta_history" type="data" />
        </when>
        </conditional>
    </inputs>
    <outputs>
        <data format="tabular" label="length and gc content" name="output" />
    </outputs>
    <tests></tests>
    <help>

        **What it does**

        Returns a tabular file with gene name, length and GC content, based on a supplied GTF and a FASTA file.


        </help>
    <citations>
    </citations>
</tool>
