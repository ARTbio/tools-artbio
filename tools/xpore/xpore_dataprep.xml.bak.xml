<tool id="xpore_dataprep" name="xpore-dataprep" version="0.5.6+galaxy0">
  <description></description>
  <requirements>
        <requirement type="package" version="0.5.6">xpore</requirement>
        <requirement type="package" version="1.9.0">pyensembl</requirement>
  </requirements>
  <stdio>
      <exit_code range="1:" level="fatal" description="Tool exception" />
  </stdio>
  <command detect_errors="exit_code"><![CDATA[
        xpore-dataprep
            --eventalign '$eventalign_reads'
            --summary '$eventalign_summary'
            --out_dir out
            --n_processes \${GALAXY_SLOTS:-4} &&
            ls -la out
  ]]></command>
 <inputs>
    <param name="eventalign_reads" type="data" format="txt,tabular" label="aligned nanopore events"
           help="a nanopolish eventalign output that aligns the nanopore events to a reference" />
    <param name="eventalign_summary" type="data" format="txt,tabular" label="nanopore eventalign summary"
           help="a summary of nanopolish eventalign by read_name,read_index" />
 </inputs>

 <outputs>
    <data format="txt" name="data_index" label="data.index" from_work_dir="./out/data.index" />
    <data format="h5" name="eventalign_hdf5" label="eventalign.hdf5" from_work_dir="./out/eventalign.hdf5" />
    <data format="txt" name="data_log" label="data.log" from_work_dir="./out/data.log" />
    <data format="txt" name="eventalign_log" label="eventalign.log" from_work_dir="./out/eventalign.log" />
    <data format="txt" name="data_readcount" label="data.readcount" from_work_dir="./out/data.readcount" />
    <data format="json" name="data_json" label="data.json" from_work_dir="./out/data.json"/>
</outputs>

<tests>
    <test>
        <param name="eventalign_reads" value="dataprep_eventaligh_reads.tsv" ftype="tabular" />
        <param name="eventalign_summary" value="dataprep_eventaligh_summary.tsv" ftype="tabular" />
        <output file="data.index" name="data_index" />
        <output file="data.log" name="data_log" />
        <output file="eventalign.log" name="eventalign_log" />
        <output file="data.readcount" name="data_readcount" />
        <output file="data.json" name="data_json" />
        <output file="eventalign.hdf5" name="eventalign_hdf5" compare="sim_size" delta="3000" />
    </test>
</tests>
<help>

**What it does**

data preparation for xpore-diffmod

.. class:: warningmark

some warnings 


**Output**

    ├── data.index
    ├── data.json
    ├── data.log
    ├── data.readcount
    ├── eventalign.hdf5
    ├── eventalign.index
    └── eventalign.log

</help>

<citations>
    <citation type="doi">10.1101/2020.06.18.160010</citation>
</citations>
</tool>
