<tool id="vcf2hrdetect" name="Convert VCF for HRDetect" version="@TOOL_VERSION@+galaxy@GALAXY_VERSION@">
    <description>from lumpy-smoove output to a 5-column tabular format</description>
    <macros>
        <!-- Use the centralized macros file -->
        <import>macros.xml</import>
    </macros>
    
    <!-- Expand macros for requirements and stdio -->
    <expand macro="requirements" />
    <expand macro="stdio" />

    <command detect_errors="exit_code"><![CDATA[
    @pipefail@
    python '$__tool_directory__'/vcf2hrdetect.py '$lumpy_smoove_vcf' '$hrdetect_tabular'
    ]]></command>
    
    <inputs>
        <param name="lumpy_smoove_vcf" type="data" format="vcf" label="Input lumpy-smoove VCF" help="VCF file containing structural variants detected by lumpy-smoove."/>
    </inputs>

    <outputs>
        <data format="tabular" name="hrdetect_tabular" label="HRDetect formatted structural variants" />
    </outputs>

    <tests>
        <test expect_num_outputs="1">
            <param name="lumpy_smoove_vcf" value="test_vcf2hrdetect.vcf" ftype="vcf" />
            <output name="hrdetect_tabular" file="test_vcf2hrdetect.tab" sort="true" ftype="tabular" />
        </test>
    </tests>
    
    <help>
**What it does**

This tool converts a VCF file produced by **lumpy-smoove** into the 5-column tabular format (chr1, pos1, chr2, pos2, type) required by the `HRDetect`_ pipeline.

.. _HRDetect: https://github.com/eyzhao/hrdetect-pipeline/
    </help>

    <citations>
    <citation type="doi">10.1038/nm.4292</citation>
  </citations>
</tool>

