<tool id="bigwig_to_wig" name="BigWig to Wig" version="2.0.0">
    <description>converter</description>
    <requirements>
        <requirement type="package" version="366">ucsc-bigwiginfo</requirement>
        <requirement type="package" version="366">ucsc-bigwigsummary</requirement>
        <requirement type="package" version="1.06">bc</requirement>
  </requirements>
    <stdio>
        <exit_code range="1:" level="fatal" description="Tool exception" />
    </stdio>
    <command detect_errors="exit_code"><![CDATA[
        sh $__tool_directory__/bigwig_to_wig.sh -f $input -b $bin_size -l $mylab > $output
    ]]></command>
  <inputs>
      <param name="input" format="bigwig" type="data" label="BigWig file to convert" />
      <param name="bin_size" size="4" type="integer" value="500" label="Bin size" help="Choose the resolution (in bp) of your wig file. Must be an even integer > 100." />
      <param name="mylab" type="text" value="wiggle_file" label="Output file prefix" help="" />
  </inputs>
  <outputs>
      <data format="wig" name="output" label="${mylab}_density_bin${bin_size}.wig" />
  </outputs>
  <tests>
      <test>
	  <param name="input" value="1.bigwig" />
	  <param name="bin_size" value="500" />
	  <param name="mylab" value="wiggle_file" />
	  <output name="output" file="1.wig" />	  
      </test>
  </tests>
  <help>

This tool converts a **BigWig** file to fixed step **Wiggle** format.

Thus, a Wiggle file produced by this tool reports values (real numbers) assigned to genomic intervals of fixed size.

The bin size is the size of this interval in nucleotide (500 nt by default).

The larger the bin size you choose, the lower resolution and the faster the conversion with the tool.
	  
This tool is based on the script written by Jens Vilstrup Johansen and is an update of a Galaxy tool previously developed by nikos_.

It uses bigWigInfo_ and bigWigSummary_.

.. _nikos: https://toolshed.g2.bx.psu.edu/view/nikos/bigwig_to_wig/974af3268394
.. _bigWigInfo: https://github.com/adamlabadorf/ucsc_tools/blob/master/executables/bigWigInfo
.. _bigWigSummary: https://github.com/adamlabadorf/ucsc_tools/blob/master/executables/bigWigSummary

</help>
</tool>
